<rules
  xmlns="http://namespaces.plone.org/diazo"
  xmlns:css="http://namespaces.plone.org/diazo/css"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmls:xi="http://www.w3.org/2001/XInclude">

  <rules if-path="/_pages" >
    <!--WARNING: throws error if the wordpress backend is not available-->
    <replace css:theme-children="#content_header" >
      <xsl:variable name="url_path" select="substring-after($path, '/_pages/')"/>
      <xsl:variable name="url_page" select="concat('http://', $wordpress_backend, '/', $url_path)"/>
      <xsl:copy-of select="document($url_page)//*[@id='content']//h1"/>
    </replace>
    <replace css:theme-children="#mainbar-dummy" >
      <xsl:variable name="url_path" select="substring-after($path, '/_pages/')"/>
      <xsl:variable name="url_page" select="concat('http://', $wordpress_backend, '/', $url_path)"/>
      <xsl:copy-of select="document($url_page)//*[contains(@class, 'entry-content')]/*"/>
    </replace>
    <append css:theme="#sidebar">
      <xsl:variable name="url_path" select="substring-after($path, '/_pages/')"/>
      <xsl:variable name="url_page" select="concat('http://', $wordpress_backend, '/', $url_path)"/>
      <xsl:copy-of select="document($url_page)//*[@id='secondary']/ul/li[position() &lt; 8]/*"/>
    </append>
  </rules>  

</rules>

